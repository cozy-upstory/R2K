<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meal Planner Questionnaire</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        form {
            background-color: #f4f4f4;
            padding: 20px;
            border-radius: 5px;
            position: relative;
            padding-bottom: 60px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input[type="text"],
        input[type="email"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        textarea {
            height: 100px;
            resize: vertical;
        }
        input[type="submit"] {
            background-color: #333;
            color: #fff;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            position: absolute;
            bottom: 20px;
            right: 20px;
        }
        input[type="submit"]:hover {
            background-color: #555;
        }
        .checkbox-group, .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 10px;
        }
        .checkbox-group label, .radio-group label {
            display: flex;
            align-items: center;
        }
        .checkbox-group input[type="checkbox"], .radio-group input[type="radio"] {
            margin-right: 5px;
        }
        .slider-container {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .slider {
            flex-grow: 1;
        }
        .slider-value {
            min-width: 60px;
        }
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .checkbox-group, .radio-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <h1>Meal Planner Questionnaire</h1>
    <form id="surveyForm">
        <h2>Personal Information:</h2>
        <label for="fullName">1. What's your full name?</label>
        <input type="text" id="fullName" name="fullName" required placeholder="e.g., John Doe">

        <label for="email">2. What's your email address?</label>
        <input type="email" id="email" name="email" required placeholder="e.g., johndoe@example.com">

        <label for="zipCode">3. What's your zip code or city where you typically buy groceries?</label>
        <input type="text" id="zipCode" name="zipCode" required placeholder="e.g., 90210 or Los Angeles">

        <h2>Household and Budget:</h2>
        <label for="peopleCount">4. How many people are you cooking for?</label>
        <input type="number" id="peopleCount" name="peopleCount" min="1" max="20" required>

        <label for="groceryBudget">5. What is your weekly budget for groceries?</label>
        <div class="slider-container">
            <input type="range" id="groceryBudget" name="groceryBudget" min="50" max="500" step="10" class="slider" value="200">
            <span class="slider-value">$200</span>
        </div>

        <h2>Dietary Preferences and Restrictions:</h2>
        <label>6. Do you or anyone you're cooking for have any specific dietary restrictions or preferences? (Select all that apply)</label>
        <div class="checkbox-group">
            <label><input type="checkbox" name="dietaryRestrictions" value="No restrictions"> No restrictions</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Vegetarian"> Vegetarian</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Vegan"> Vegan</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Gluten-free"> Gluten-free</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Dairy-free"> Dairy-free</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Keto"> Keto</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Paleo"> Paleo</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Low-carb"> Low-carb</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Low-fat"> Low-fat</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Other"> Other</label>
        </div>
        <input type="text" id="otherDietaryRestrictions" name="otherDietaryRestrictions" placeholder="Please specify other dietary restrictions" style="display: none;">

        <label>7. What are the preferred macronutrient goals for the majority of people you're cooking for?</label>
        <div class="radio-group">
            <label><input type="radio" name="macronutrientGoals" value="Balanced"> Balanced (equal proportion of carbs, protein, and fat)</label>
            <label><input type="radio" name="macronutrientGoals" value="High protein, moderate carb, low fat"> High protein, moderate carb, low fat</label>
            <label><input type="radio" name="macronutrientGoals" value="High fat, moderate protein, low carb"> High fat, moderate protein, low carb</label>
            <label><input type="radio" name="macronutrientGoals" value="High carb, moderate protein, low fat"> High carb, moderate protein, low fat</label>
            <label><input type="radio" name="macronutrientGoals" value="No preference"> No preference</label>
            <label><input type="radio" name="macronutrientGoals" value="Mixed"> Mixed preferences</label>
        </div>
        <input type="text" id="mixedMacronutrientGoals" name="mixedMacronutrientGoals" placeholder="Please specify mixed preferences" style="display: none;">

        <label>8. Do you have daily calorie goals for the people you're cooking for?</label>
        <div class="radio-group">
            <label><input type="radio" name="calorieGoals" value="No specific goals"> No specific goals</label>
            <label><input type="radio" name="calorieGoals" value="Yes"> Yes, please specify for each person:</label>
        </div>
        <div id="calorieGoalsInputs" style="display: none;">
            <!-- Calorie goal inputs will be dynamically added here based on the number of people -->
        </div>

        <script>
            // Update slider value display
            document.getElementById('groceryBudget').addEventListener('input', function() {
                document.querySelector('.slider-value').textContent = '$' + this.value;
            });

            // Show/hide "Other" dietary restrictions input
            document.querySelectorAll('input[name="dietaryRestrictions"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    document.getElementById('otherDietaryRestrictions').style.display = 
                        document.querySelector('input[name="dietaryRestrictions"][value="Other"]').checked ? 'block' : 'none';
                });
            });

            // Show/hide mixed macronutrient goals input
            document.querySelectorAll('input[name="macronutrientGoals"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    document.getElementById('mixedMacronutrientGoals').style.display = 
                        this.value === 'Mixed' ? 'block' : 'none';
                });
            });

            // Show/hide and update calorie goal inputs
            document.querySelectorAll('input[name="calorieGoals"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const calorieGoalsInputs = document.getElementById('calorieGoalsInputs');
                    calorieGoalsInputs.style.display = this.value === 'Yes' ? 'block' : 'none';
                    if (this.value === 'Yes') {
                        updateCalorieGoalInputs();
                    }
                });
            });

            // Function to update calorie goal inputs
            function updateCalorieGoalInputs() {
                const peopleCount = parseInt(document.getElementById('peopleCount').value);
                const calorieGoalsInputs = document.getElementById('calorieGoalsInputs');
                calorieGoalsInputs.innerHTML = '';
                for (let i = 1; i <= peopleCount; i++) {
                    calorieGoalsInputs.innerHTML += `
                        <div>
                            <label for="person${i}Calories">Person ${i}:</label>
                            <select id="person${i}Calories" name="person${i}Calories">
                                <option value="">Select calorie range</option>
                                <option value="1200-1500">1200-1500</option>
                                <option value="1501-1800">1501-1800</option>
                                <option value="1801-2100">1801-2100</option>
                                <option value="2101-2400">2101-2400</option>
                                <option value="2401+">2401+</option>
                            </select>
                        </div>
                    `;
                }
            }

            // Update calorie goal inputs when people count changes
            document.getElementById('peopleCount').addEventListener('change', function() {
                if (document.querySelector('input[name="calorieGoals"]:checked')?.value === 'Yes') {
                    updateCalorieGoalInputs();
                }
            });
        </script>

       <label>9. Are you or anyone you're cooking for aiming for any specific health goals? (Select all that apply)</label>
        <div class="checkbox-group">
            <label><input type="checkbox" name="healthGoals" value="Weight loss"> Weight loss</label>
            <label><input type="checkbox" name="healthGoals" value="Muscle gain"> Muscle gain</label>
            <label><input type="checkbox" name="healthGoals" value="Maintenance"> Maintenance</label>
            <label><input type="checkbox" name="healthGoals" value="Improved energy"> Improved energy</label>
            <label><input type="checkbox" name="healthGoals" value="Better digestion"> Better digestion</label>
            <label><input type="checkbox" name="healthGoals" value="Other"> Other</label>
        </div>
        <input type="text" id="otherHealthGoals" name="otherHealthGoals" placeholder="Please specify other health goals" style="display: none;">

        <h2>Food Preferences:</h2>
        <label>10. What are some favorite foods or ingredients among the people you're cooking for? (Select all that apply)</label>
        <input type="text" id="favoriteFoodsSearch" placeholder="Search for foods...">
        <div class="checkbox-group" id="favoriteFoodsGroup">
            <label><input type="checkbox" name="favoriteFoods" value="Chicken"> Chicken</label>
            <label><input type="checkbox" name="favoriteFoods" value="Beef"> Beef</label>
            <label><input type="checkbox" name="favoriteFoods" value="Fish"> Fish</label>
            <label><input type="checkbox" name="favoriteFoods" value="Tofu"> Tofu</label>
            <label><input type="checkbox" name="favoriteFoods" value="Eggs"> Eggs</label>
            <label><input type="checkbox" name="favoriteFoods" value="Cheese"> Cheese</label>
            <label><input type="checkbox" name="favoriteFoods" value="Pasta"> Pasta</label>
            <label><input type="checkbox" name="favoriteFoods" value="Rice"> Rice</label>
            <label><input type="checkbox" name="favoriteFoods" value="Potatoes"> Potatoes</label>
            <label><input type="checkbox" name="favoriteFoods" value="Leafy greens"> Leafy greens</label>
            <label><input type="checkbox" name="favoriteFoods" value="Broccoli"> Broccoli</label>
            <label><input type="checkbox" name="favoriteFoods" value="Carrots"> Carrots</label>
            <label><input type="checkbox" name="favoriteFoods" value="Tomatoes"> Tomatoes</label>
            <label><input type="checkbox" name="favoriteFoods" value="Berries"> Berries</label>
            <label><input type="checkbox" name="favoriteFoods" value="Nuts"> Nuts</label>
            <label><input type="checkbox" name="favoriteFoods" value="Other"> Other</label>
        </div>
        <input type="text" id="otherFavoriteFoods" name="otherFavoriteFoods" placeholder="Please specify other favorite foods" style="display: none;">

        <label>11. Are there any foods or ingredients that you or anyone you're cooking for dislikes or wants to avoid? (Select all that apply)</label>
        <input type="text" id="dislikedFoodsSearch" placeholder="Search for foods...">
        <div class="checkbox-group" id="dislikedFoodsGroup">
            <label><input type="checkbox" name="dislikedFoods" value="Mushrooms"> Mushrooms</label>
            <label><input type="checkbox" name="dislikedFoods" value="Onions"> Onions</label>
            <label><input type="checkbox" name="dislikedFoods" value="Bell peppers"> Bell peppers</label>
            <label><input type="checkbox" name="dislikedFoods" value="Seafood"> Seafood</label>
            <label><input type="checkbox" name="dislikedFoods" value="Spicy foods"> Spicy foods</label>
            <label><input type="checkbox" name="dislikedFoods" value="Other"> Other</label>
        </div>
        <input type="text" id="otherDislikedFoods" name="otherDislikedFoods" placeholder="Please specify other disliked foods" style="display: none;">

        <label>12. What portion sizes do you typically prepare?</label>
        <div class="radio-group">
            <label><input type="radio" name="portionSizes" value="Smaller portions for everyone" required> Smaller portions for everyone</label>
            <label><input type="radio" name="portionSizes" value="Average portions for everyone"> Average portions for everyone</label>
            <label><input type="radio" name="portionSizes" value="Larger portions for everyone"> Larger portions for everyone</label>
            <label><input type="radio" name="portionSizes" value="Mixed"> Mixed (please specify individual needs)</label>
        </div>
        <input type="text" id="mixedPortionSizes" name="mixedPortionSizes" placeholder="Please specify mixed portion sizes" style="display: none;">

        <h2>Cooking Habits and Skills:</h2>
        <label>13. How would you rate your cooking skills?</label>
        <div class="radio-group">
            <label><input type="radio" name="cookingSkills" value="Beginner" required> Beginner (I can follow simple recipes)</label>
            <label><input type="radio" name="cookingSkills" value="Intermediate"> Intermediate (I can cook most dishes with a recipe)</label>
            <label><input type="radio" name="cookingSkills" value="Advanced"> Advanced (I can cook without recipes and experiment)</label>
        </div>

        <label>14. What kitchen equipment do you have at home? (Select all that apply)</label>
        <div class="checkbox-group">
            <label><input type="checkbox" name="kitchenEquipment" value="Oven"> Oven</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Stovetop"> Stovetop</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Microwave"> Microwave</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Refrigerator"> Refrigerator</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Freezer"> Freezer</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Blender"> Blender</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Food processor"> Food processor</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Stand mixer"> Stand mixer</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Hand mixer"> Hand mixer</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Slow cooker"> Slow cooker (Crock-Pot)</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Pressure cooker"> Pressure cooker (Instant Pot)</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Air fryer"> Air fryer</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Rice cooker"> Rice cooker</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Toaster"> Toaster</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Toaster oven"> Toaster oven</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Grill"> Grill (indoor or outdoor)</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Sous vide"> Sous vide machine</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Juicer"> Juicer</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Other"> Other</label>
        </div>
        <input type="text" id="otherKitchenEquipment" name="otherKitchenEquipment" placeholder="Please specify other kitchen equipment" style="display: none;">

        <label>15. Do you prefer to cook meals each day or prep them ahead of time?</label>
        <div class="radio-group">
            <label><input type="radio" name="mealPrep" value="Cook daily" required> Cook daily (I prefer to cook fresh meals each day)</label>
            <label><input type="radio" name="mealPrep" value="Prep some meals ahead"> Prep some meals ahead (I like a mix of fresh cooking and meal prep)</label>
            <label><input type="radio" name="mealPrep" value="Prep all meals ahead"> Prep all meals ahead (I prefer to do most of my cooking in batches)</label>
        </div>

        <input type="submit" value="Submit">
    </form>

    <script>
        // Show/hide "Other" inputs for checkbox groups
        function setupOtherOption(checkboxName, inputId) {
            document.querySelectorAll(`input[name="${checkboxName}"]`).forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    document.getElementById(inputId).style.display = 
                        document.querySelector(`input[name="${checkboxName}"][value="Other"]`).checked ? 'block' : 'none';
                });
            });
        }

        setupOtherOption('healthGoals', 'otherHealthGoals');
        setupOtherOption('favoriteFoods', 'otherFavoriteFoods');
        setupOtherOption('dislikedFoods', 'otherDislikedFoods');
        setupOtherOption('kitchenEquipment', 'otherKitchenEquipment');

        // Show/hide mixed portion sizes input
        document.querySelectorAll('input[name="portionSizes"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.getElementById('mixedPortionSizes').style.display = 
                    this.value === 'Mixed' ? 'block' : 'none';
            });
        });

        // Search functionality for favorite and disliked foods
        function setupSearch(searchId, groupId) {
            document.getElementById(searchId).addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                document.querySelectorAll(`#${groupId} label`).forEach(label => {
                    const text = label.textContent.toLowerCase();
                    label.style.display = text.includes(searchTerm) ? '' : 'none';
                });
            });
        }

        setupSearch('favoriteFoodsSearch', 'favoriteFoodsGroup');
        setupSearch('dislikedFoodsSearch', 'dislikedFoodsGroup');

        // Form submission
        document.getElementById('surveyForm').addEventListener('submit', e => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = {
                fullName: formData.get('fullName'),
                email: formData.get('email'),
                results: []
            };
            
            formData.forEach((value, key) => {
                if (key !== 'fullName' && key !== 'email') {
                    if (['kitchenEquipment', 'dietaryRestrictions', 'healthGoals', 'favoriteFoods', 'dislikedFoods'].includes(key)) {
                        const checkedItems = Array.from(e.target.querySelectorAll(`input[name="${key}"]:checked`))
                            .map(input => input.value);
                        data.results.push(`${key}: ${checkedItems.join(', ')}`);
                    } else {
                        const label = e.target.querySelector(`label[for="${key}"]`);
                        const question = label ? label.textContent : key;
                        data.results.push(`${question} ${value}`);
                    }
                }
            });

            // Join results with semicolons
            data.results = data.results.join('; ');

            // Send data to Google Sheet
            fetch('https://script.google.com/macros/s/AKfycbyza1IyXT3u0bwhTz6_1oRumyAtIdxMBwbXCbE45iPRH03n7V76FrmeyIMOWsVKqbk-/exec', {
                method: 'POST',
                mode: 'no-cors',
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }).then(() => {
                alert('Form submitted successfully!');
                e.target.reset();
            }).catch(error => {
                console.error('Error:', error);
                alert('There was an error submitting the form. Please try again.');
            });
        });
    </script>
</body>
</html>
