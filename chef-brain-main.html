<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meal Planner Questionnaire</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        form {
            background-color: #f4f4f4;
            padding: 20px;
            border-radius: 5px;
            position: relative;
            padding-bottom: 60px; /* Space for the submit button */
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input[type="text"],
        input[type="email"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        textarea {
            height: 100px;
            resize: vertical;
        }
        input[type="submit"] {
            background-color: #333;
            color: #fff;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            position: absolute;
            bottom: 20px;
            right: 20px;
        }
        input[type="submit"]:hover {
            background-color: #555;
        }
        .checkbox-group, .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 10px;
        }
        .checkbox-group label, .radio-group label {
            display: flex;
            align-items: center;
        }
        .checkbox-group input[type="checkbox"], .radio-group input[type="radio"] {
            margin-right: 5px;
        }
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .checkbox-group, .radio-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <h1>Meal Planner Questionnaire</h1>
    <form id="surveyForm">
        <h2>Personal Information:</h2>
        <label for="fullName">1. What's your full name?</label>
        <input type="text" id="fullName" name="fullName" required>

        <label for="email">2. What's your email address?</label>
        <input type="email" id="email" name="email" required>

        <label for="zipCode">3. What's your zip code or city where you typically buy groceries?</label>
        <input type="text" id="zipCode" name="zipCode" required>

        <h2>Household and Budget:</h2>
        <label for="peopleCount">4. How many people are you cooking for?</label>
        <input type="number" id="peopleCount" name="peopleCount" min="1" max="10" required>

        <label>5. What is your weekly budget for groceries?</label>
        <div class="radio-group">
            <label><input type="radio" name="groceryBudget" value="$50-$100" required> $50-$100</label>
            <label><input type="radio" name="groceryBudget" value="$101-$150"> $101-$150</label>
            <label><input type="radio" name="groceryBudget" value="$151-$200"> $151-$200</label>
            <label><input type="radio" name="groceryBudget" value="$201-$250"> $201-$250</label>
            <label><input type="radio" name="groceryBudget" value="$251-$300"> $251-$300</label>
            <label><input type="radio" name="groceryBudget" value="$301+"> $301+</label>
        </div>

        <h2>Dietary Preferences and Restrictions:</h2>
        <label>6. Do you or anyone you're cooking for have any specific dietary restrictions or preferences? (Select all that apply)</label>
        <div class="checkbox-group">
            <label><input type="checkbox" name="dietaryRestrictions" value="No restrictions"> No restrictions</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Vegetarian"> Vegetarian</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Vegan"> Vegan</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Gluten-free"> Gluten-free</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Dairy-free"> Dairy-free</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Keto"> Keto</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Paleo"> Paleo</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Low-carb"> Low-carb</label>
            <label><input type="checkbox" name="dietaryRestrictions" value="Low-fat"> Low-fat</label>
        </div>
        <label for="otherDietaryRestrictions">Food allergies or other restrictions (please specify)</label>
        <input type="text" id="otherDietaryRestrictions" name="otherDietaryRestrictions">

        <label>7. What are the preferred macronutrient goals for the majority of people you're cooking for?</label>
        <div class="radio-group">
            <label><input type="radio" name="macronutrientGoals" value="Balanced" required> Balanced (equal proportion of carbs, protein, and fat)</label>
            <label><input type="radio" name="macronutrientGoals" value="High protein, moderate carb, low fat"> High protein, moderate carb, low fat</label>
            <label><input type="radio" name="macronutrientGoals" value="High fat, moderate protein, low carb"> High fat, moderate protein, low carb</label>
            <label><input type="radio" name="macronutrientGoals" value="High carb, moderate protein, low fat"> High carb, moderate protein, low fat</label>
            <label><input type="radio" name="macronutrientGoals" value="No preference"> No preference</label>
        </div>
        <label for="mixedMacronutrientGoals">Mixed preferences (please specify)</label>
        <input type="text" id="mixedMacronutrientGoals" name="mixedMacronutrientGoals">

        <label>8. Do you have daily calorie goals for the people you're cooking for?</label>
        <div class="radio-group">
            <label><input type="radio" name="calorieGoals" value="No specific goals" required> No specific goals</label>
            <label><input type="radio" name="calorieGoals" value="Yes"> Yes, please specify for each person:</label>
        </div>
        <div id="calorieGoalsInputs" style="display: none;">
            <label for="person1Calories">Person 1:</label>
            <select id="person1Calories" name="person1Calories">
                <option value="">Select calorie range</option>
                <option value="1200-1500">1200-1500</option>
                <option value="1501-1800">1501-1800</option>
                <option value="1801-2100">1801-2100</option>
                <option value="2101-2400">2101-2400</option>
                <option value="2401+">2401+</option>
            </select>
            <!-- Additional person calorie inputs will be dynamically added here based on the answer to question 4 -->
        </div>
        <label>9. Are you or anyone you're cooking for aiming for any specific health goals? (Select all that apply)</label>
        <div class="checkbox-group">
            <label><input type="checkbox" name="healthGoals" value="Weight loss"> Weight loss</label>
            <label><input type="checkbox" name="healthGoals" value="Muscle gain"> Muscle gain</label>
            <label><input type="checkbox" name="healthGoals" value="Maintenance"> Maintenance</label>
            <label><input type="checkbox" name="healthGoals" value="Improved energy"> Improved energy</label>
            <label><input type="checkbox" name="healthGoals" value="Better digestion"> Better digestion</label>
        </div>
        <label for="otherHealthGoals">Other health goals (please specify)</label>
        <input type="text" id="otherHealthGoals" name="otherHealthGoals">

        <h2>Food Preferences:</h2>
        <label>10. What are some favorite foods or ingredients among the people you're cooking for? (Select all that apply)</label>
        <div class="checkbox-group">
            <label><input type="checkbox" name="favoriteFoods" value="Chicken"> Chicken</label>
            <label><input type="checkbox" name="favoriteFoods" value="Beef"> Beef</label>
            <label><input type="checkbox" name="favoriteFoods" value="Fish"> Fish</label>
            <label><input type="checkbox" name="favoriteFoods" value="Tofu"> Tofu</label>
            <label><input type="checkbox" name="favoriteFoods" value="Eggs"> Eggs</label>
            <label><input type="checkbox" name="favoriteFoods" value="Cheese"> Cheese</label>
            <label><input type="checkbox" name="favoriteFoods" value="Pasta"> Pasta</label>
            <label><input type="checkbox" name="favoriteFoods" value="Rice"> Rice</label>
            <label><input type="checkbox" name="favoriteFoods" value="Potatoes"> Potatoes</label>
            <label><input type="checkbox" name="favoriteFoods" value="Leafy greens"> Leafy greens</label>
            <label><input type="checkbox" name="favoriteFoods" value="Broccoli"> Broccoli</label>
            <label><input type="checkbox" name="favoriteFoods" value="Carrots"> Carrots</label>
            <label><input type="checkbox" name="favoriteFoods" value="Tomatoes"> Tomatoes</label>
            <label><input type="checkbox" name="favoriteFoods" value="Berries"> Berries</label>
            <label><input type="checkbox" name="favoriteFoods" value="Nuts"> Nuts</label>
        </div>
        <label for="otherFavoriteFoods">Other favorites or individual preferences (please specify)</label>
        <input type="text" id="otherFavoriteFoods" name="otherFavoriteFoods">

        <label>11. Are there any foods or ingredients that you or anyone you're cooking for dislikes or wants to avoid? (Select all that apply)</label>
        <div class="checkbox-group">
            <label><input type="checkbox" name="dislikedFoods" value="Mushrooms"> Mushrooms</label>
            <label><input type="checkbox" name="dislikedFoods" value="Onions"> Onions</label>
            <label><input type="checkbox" name="dislikedFoods" value="Bell peppers"> Bell peppers</label>
            <label><input type="checkbox" name="dislikedFoods" value="Seafood"> Seafood</label>
            <label><input type="checkbox" name="dislikedFoods" value="Spicy foods"> Spicy foods</label>
        </div>
        <label for="otherDislikedFoods">Other dislikes or individual restrictions (please specify)</label>
        <input type="text" id="otherDislikedFoods" name="otherDislikedFoods">

        <label>12. What portion sizes do you typically prepare?</label>
        <div class="radio-group">
            <label><input type="radio" name="portionSizes" value="Smaller portions for everyone" required> Smaller portions for everyone</label>
            <label><input type="radio" name="portionSizes" value="Average portions for everyone"> Average portions for everyone</label>
            <label><input type="radio" name="portionSizes" value="Larger portions for everyone"> Larger portions for everyone</label>
            <label><input type="radio" name="portionSizes" value="Mixed"> Mixed (please specify individual needs)</label>
        </div>
        <input type="text" id="mixedPortionSizes" name="mixedPortionSizes" style="display: none;">

        <h2>Cooking Habits and Skills:</h2>
        <label>13. How would you rate your cooking skills?</label>
        <div class="radio-group">
            <label><input type="radio" name="cookingSkills" value="Beginner" required> Beginner</label>
            <label><input type="radio" name="cookingSkills" value="Intermediate"> Intermediate</label>
            <label><input type="radio" name="cookingSkills" value="Advanced"> Advanced</label>
        </div>

        <label>14. What kitchen equipment do you have at home? (Select all that apply)</label>
        <div class="checkbox-group">
            <label><input type="checkbox" name="kitchenEquipment" value="Oven"> Oven</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Stovetop"> Stovetop</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Microwave"> Microwave</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Blender"> Blender</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Food processor"> Food processor</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Slow cooker"> Slow cooker</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Pressure cooker"> Pressure cooker</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Air fryer"> Air fryer</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Grill"> Grill</label>
            <label><input type="checkbox" name="kitchenEquipment" value="Rice cooker"> Rice cooker</label>
        </div>
        <label for="otherKitchenEquipment">Other equipment (please specify)</label>
        <input type="text" id="otherKitchenEquipment" name="otherKitchenEquipment">

        <label>15. Do you prefer to cook meals each day or prep them ahead of time?</label>
        <div class="radio-group">
            <label><input type="radio" name="mealPrep" value="Cook daily" required> Cook daily</label>
            <label><input type="radio" name="mealPrep" value="Prep some meals ahead"> Prep some meals ahead</label>
            <label><input type="radio" name="mealPrep" value="Prep all meals ahead"> Prep all meals ahead</label>
        </div>

        <input type="submit" value="Submit">
    </form>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('surveyForm');
        form.addEventListener('submit', e => {
            e.preventDefault();
            const formData = new FormData(form);
            const data = {
                fullName: formData.get('fullName'),
                email: formData.get('email'),
                results: []
            };
            
            formData.forEach((value, key) => {
                if (key !== 'fullName' && key !== 'email') {
                    if (key === 'kitchenEquipment' || key === 'dietaryRestrictions' || key === 'healthGoals' || key === 'favoriteFoods' || key === 'dislikedFoods') {
                        const checkedItems = Array.from(form.querySelectorAll(`input[name="${key}"]:checked`))
                            .map(input => input.value);
                        data.results.push(`${key}: ${checkedItems.join(', ')}`);
                    } else {
                        const label = form.querySelector(`label[for="${key}"]`);
                        const question = label ? label.textContent : key;
                        data.results.push(`${question} ${value}`);
                    }
                }
            });

            // Join results with semicolons
            data.results = data.results.join('; ');

            // Send data to Google Sheet
            fetch('https://script.google.com/macros/s/AKfycbyza1IyXT3u0bwhTz6_1oRumyAtIdxMBwbXCbE45iPRH03n7V76FrmeyIMOWsVKqbk-/exec', {
                method: 'POST',
                mode: 'no-cors',
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }).then(() => {
                alert('Form submitted successfully!');
                form.reset();
            }).catch(error => {
                console.error('Error:', error);
                alert('There was an error submitting the form. Please try again.');
            });
        });

        // Show/hide mixed portion sizes input
        document.querySelectorAll('input[name="portionSizes"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.getElementById('mixedPortionSizes').style.display = 
                    this.value === 'Mixed' ? 'block' : 'none';
            });
        });
    });
    </script>
</body>
</html>
